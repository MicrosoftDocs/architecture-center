---
title: Image classification with Convolutional Neural Networks
titleSuffix: Azure Solution Ideas
author: adamboeglin
ms.date: 12/16/2019
description: Explore transfer learning, convolutional neural networks, and gradient-boosting decision tree algorithms.
ms.custom: acom-architecture, convolutional neural network, discrete manufacturing, decision tree algorithm, image classification, gradient boosting decision tree, ai-ml, failure detection, automated manufacturing solutions, 'https://azure.microsoft.com/solutions/architecture/image-classification-with-convolutional-neural-networks/'
ms.service: architecture-center
ms.category:
  - ai-machine-learning
ms.subservice: solution-idea
social_image_url: /azure/architecture/solution-ideas/articles/media/image-classification-with-convolutional-neural-networks.png
---

# Image classification with Convolutional Neural Networks

[!INCLUDE [header_file](../../../includes/sol-idea-header.md)]

Lean manufacturing, cost control, and waste reduction are imperative for manufacturing to remain competitive. In circuit-board manufacturing, faulty boards can cost manufacturers money and productivity. Assembly lines rely on human operators to quickly review and validate boards flagged as potentially faulty by assembly-line test machines.

This solution analyzes electronic component images generated by assembly-line cameras in a circuit-board manufacturing plant and detects their error status. The goal is to minimize or remove the need for human intervention. The solution builds an image classification system using a convolutional neural network with 50 hidden layers, pretrained on 350,000 images in an ImageNet dataset to generate visual features of the images by removing the last network layer. These features are then used to train a boosted decision tree to classify the image as "pass" or "fail" and final scoring conducted on edge machines at the plant. The classification performance results are good (time-based cross-validation AUC>.90) which indicates the solution is suitable to drastically minimize human intervention for electronic-components failure detection in assembled circuit boards.

Using this solution to automate failure detection instead of relying solely on human operators helps improve the identification of faulty electronic components and boost productivity.

## Architecture

![Architecture Diagram](../media/image-classification-with-convolutional-neural-networks.png)
*Download an [SVG](../media/image-classification-with-convolutional-neural-networks.svg) of this architecture.*

## Components

* Azure Blob Storage: Data is ingested and stored in Azure Blob Storage.
* GPU based Azure Data Science Virtual Machine: The core development environment is the Azure Ubuntu-based GPU DSVM. The data is pulled from blob onto an Azure virtual hard disk (VHD) attached to the DSVM. On that VHD, the data is processed, the images are featurized using a Deep Neural Network, and a Boosted Tree model is trained. DSVM IPython Notebook server is used for solution development.
* Azure Batch AI training (BAIT): As an alternative to DSVM-based training, for computing-intensive jobs that use deep-learning image processing, we use BAIT as a managed Azure Batch framework for parallel and distributed computing using clusters of GPU compute nodes.
* Microsoft Machine Learning for Apache Spark HDInsight Spark Cluster: As an alternative to DSVM-based training, for big datasets, we use MMLSpark to build a highly scalable training solution.
* Azure Container Registry: The model and web application are packaged into a Docker image and written to Azure Container Registry.
* Azure Machine Learning Model Management Service: Azure Machine Learning Model Management service is used to deploy and manage the final model on a VM and to scale out using Azure Kubernetes Service to a Kubernetes managed Azure cluster. A predictive web service and a Java ETL service are also written onto the VM, each in its own container.
* [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service): Deployment for this solution uses Azure Kubernetes Service running a Kubernetes-managed cluster. The containers are deployed from images stored in Azure Container Registry.

## Next steps

* [Learn more about Azure Blob Storage](https://azure.microsoft.com/services/storage/blobs)
* [Learn more about Batch AI Training](https://azure.microsoft.com/roadmap/azure-batch-ai-training-for-deep-learning-models)
* [Browse on GitHub](https://github.com/azure/mmlspark)
* [Learn more about Azure Container Registry](https://azure.microsoft.com/services/container-registry)
* [Learn more about Model Management](/azure/machine-learning/concept-model-management-and-deployment)
* [Learn more about Azure Kubernetes Service](https://azure.microsoft.com/services/kubernetes-service)
